/* Generated by $(version) ($(date)) */
#ifndef $(PROC)_PLATFORM_H
#define $(PROC)_PLATFORM_H

#include <$(proc)/api.h>
$(foreach modules)
$(if is_mem)
#include <$(proc)/mem.h>
$(else)
#include <$(proc)/$(name).h>
$(end)
$(end)

/* $(proc)_platform_t structure */
struct $(proc)_platform_t
{
	int usage;

	/* entry point of the simulated program */
	$(proc)_address_t entry;
	/* initial sp, argv, envp ... */
	$(proc)_env_t *sys_env;

	union
	{
		$(proc)_memory_t *array[0];
		struct
		{
$(foreach memories)
			$(proc)_memory_t *$(name);
$(end)
		} named;
	} mems;
$(foreach modules)
	$(PROC)_$(NAME)_STATE
$(end)
};

/* functions */

#endif	/* $(PROC)_PLATFORM_H */
